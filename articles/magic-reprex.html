<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="reprex">
<title>Magic reprex • reprex</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Magic reprex">
<meta property="og:description" content="reprex">
<meta property="og:image" content="https://reprex.tidyverse.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="reprex.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">reprex</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/reprex-dos-and-donts.html">Reprex do's and don'ts</a>
    <a class="dropdown-item" href="../articles/rtf.html">reprex venue RTF</a>
    <a class="dropdown-item" href="../articles/datapasta-reprex.html">Using datapasta with reprex</a>
    <a class="dropdown-item" href="../articles/suppress-startup-messages.html">Suppress package startup messages</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/04/reprex-2-0-0/">reprex 2.0.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/02/reprex-1-0-0/">reprex 1.0.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidyverse/reprex/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Magic reprex</h1>
                        <h4 data-toc-skip class="author"><a href="http://www.njtierney.com" class="external-link">Nicholas Tierney</a></h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/reprex/blob/HEAD/vignettes/articles/magic-reprex.Rmd" class="external-link"><code>vignettes/articles/magic-reprex.Rmd</code></a></small>
      <div class="d-none name"><code>magic-reprex.Rmd</code></div>
    </div>

    
    
<blockquote>
<p>This article has been adapted from a post on <a href="https://www.njtierney.com/post/2017/01/11/magic-reprex/" class="external-link">Nick Tierney’s blog</a> to help spread the good word about reprex! :) - <strong>Nick Tierney</strong></p>
</blockquote>
<p>Making reproducible examples can be hard.</p>
<p>There’s a lot of things you need to consider. Like, making sure your environment is clean, the right packages are loaded, the code is formatted nicely, and images are the right resolution and dimension.</p>
<p>Getting all of these ducks lined up can sometimes take a couple of minutes, if you have a nice tightly defined problem. Other times, it can take much, much longer. Say for example, if you had a variable loaded in your environment that you forgot how to create, and you didn’t realise it was so important and OH GOD HOW DID I EVEN DO THIS? Ahem.</p>
<p>So, after some sensible swearing and frustration, you might ask yourself something like:</p>
<blockquote>
<p>Surely there’s an easy, reproducible way to … make reproducible examples?</p>
</blockquote>
<p>Enter the R package reprex (on <a href="https://cran.r-project.org/package=reprex" class="external-link">CRAN</a>, on <a href="https://github.com/tidyverse/reprex" class="external-link">GitHub</a>), by <a href="http://www.github.com/jennybc" class="external-link">Jenny Bryan</a>.</p>
<p>In the fashion of the times right now, I’ll illustrate reprex with a gif, which shows the following things:</p>
<ol style="list-style-type: decimal">
<li>Take your code, copy it to the clipboard.</li>
<li>Run <code><a href="../reference/reprex.html">reprex::reprex()</a></code>, wait a moment for the code to execute.</li>
<li>
<code><a href="../reference/reprex.html">reprex::reprex()</a></code> creates a html preview of your code.</li>
<li>A markdown chunk is also copied to the clipboard.</li>
</ol>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex-copy.gif" alt="Gif of reprex copying code, running reprex, and demonstrating the html preview of the code text" style="width: 100%;max-height: 100%"></p>
</div>

<p>This means you can copy this to say, GitHub (<code>reprex(venue = "gh")</code>) (the default) to help you file an issue:</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex-github.gif" alt="Gif of reprex copying code, running reprex, and demonstrating the html preview of the code text" style="width: 100%;max-height: 100%"></p>
</div>

<p>There is also an option for Stack Overflow (<code>reprex(venue = "so")</code>).</p>
<p>How does this work? <code><a href="../reference/reprex.html">reprex()</a></code> takes the section of copied code and then runs <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html" class="external-link">rmarkdown::render()</a></code> on it, which starts a fresh environment, and runs the code. This means that <code><a href="../reference/reprex.html">reprex()</a></code> will fail hard and fail early if your examples aren’t reproducible. If you don’t have the correct library loaded, it will show the error messages.</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex-fail-1.gif" alt="Gif of reprex copying code, running reprex, and demonstrating the html preview of the code text" style="width: 100%;max-height: 100%"></p>
</div>

<p>But then when you fix that, by adding library calls to <a href="https://github.com/njtierney/visdat" class="external-link"><code>visdat</code></a>, <a href="https://github.com/tidyverse/ggplot2" class="external-link"><code>ggplot2</code></a> and <a href="https://github.com/njtierney/naniar" class="external-link"><code>naniar</code></a>, and you get what you want:</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex-success-1.gif" alt="Gif of reprex copying code, running reprex, and demonstrating the html preview of the code text using visdat, naniar, and ggplot2 packages" style="width: 100%;max-height: 100%"></p>
</div>

<p>So you know that when you run <code><a href="../reference/reprex.html">reprex()</a></code>, and it gives you a reproducible example, it will work!</p>
<p>Also worth mentioning is that rather magically, <code><a href="../reference/reprex.html">reprex()</a></code> also handles images. I didn’t even notice this at first. It was just one of those things where “it just works”. <code><a href="../reference/reprex.html">reprex()</a></code> handles this by uploading them to imgur using the <code><a href="https://rdrr.io/pkg/knitr/man/imgur_upload.html" class="external-link">knitr::imgur_upload()</a></code> function, which creates markdown links to the images.</p>
<p>so</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>

<span class="co"># run a lm</span>

<span class="va">lm_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">.</span> , data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span>

<span class="co"># use broom to clean it up</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span>

<span class="va">lm_augmented</span> <span class="op">&lt;-</span> <span class="fu">augment</span><span class="op">(</span><span class="va">lm_fit</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">lm_augmented</span><span class="op">)</span>

<span class="co"># Explore the fit of the model</span>

<span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">lm_augmented</span>,
   <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">.fitted</span>,
       y <span class="op">=</span> <span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>gets turned into</p>
<pre><code>library(tidyverse)
#&gt; Loading tidyverse: ggplot2
#&gt; Loading tidyverse: tibble
#&gt; Loading tidyverse: tidyr
#&gt; Loading tidyverse: readr
#&gt; Loading tidyverse: purrr
#&gt; Loading tidyverse: dplyr
#&gt; Conflicts with tidy packages ----------------------------------------------
#&gt; filter(): dplyr, stats
#&gt; lag():    dplyr, stats

# run a lm

lm_fit &lt;- lm(Sepal.Length ~ . , data = iris)

# use broom to clean it up

library(broom)

lm_augmented &lt;- augment(lm_fit)

head(lm_augmented)
#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species  .fitted
#&gt; 1          5.1         3.5          1.4         0.2  setosa 5.004788
#&gt; 2          4.9         3.0          1.4         0.2  setosa 4.756844
#&gt; 3          4.7         3.2          1.3         0.2  setosa 4.773097
#&gt; 4          4.6         3.1          1.5         0.2  setosa 4.889357
#&gt; 5          5.0         3.6          1.4         0.2  setosa 5.054377
#&gt; 6          5.4         3.9          1.7         0.4  setosa 5.388886
#&gt;      .se.fit      .resid       .hat    .sigma      .cooksd  .std.resid
#&gt; 1 0.04479188  0.09521198 0.02131150 0.3077918 3.570856e-04  0.31367294
#&gt; 2 0.05514933  0.14315645 0.03230694 0.3076565 1.251718e-03  0.47429637
#&gt; 3 0.04690495 -0.07309695 0.02336968 0.3078349 2.317688e-04 -0.24106926
#&gt; 4 0.05135928 -0.28935683 0.02801904 0.3069173 4.396118e-03 -0.95656076
#&gt; 5 0.04736842 -0.05437691 0.02383379 0.3078627 1.309299e-04 -0.17937436
#&gt; 6 0.05592364  0.01111427 0.03322050 0.3078956 7.772793e-06  0.03684044

# Explore the fit of the model, looking

ggplot(data = lm_augmented,
       aes(x = .fitted,
           y = Sepal.Length)) +
  geom_point()

![](http://i.imgur.com/h72ZEKG.png)</code></pre>
<p>You can even show the results of the <code>session_info()</code>, for maximum reproducibility, by adding the argument: <code>reprex::reprex(session_info = TRUE)</code>, which adds a super nifty drop down box for the session info.</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/reprex-si.gif" alt="Gif of reprex copying code, running reprex, showing option SI = TRUE" style="width: 100%;max-height: 100%"></p>
</div>

<p>I really like these sorts of small tools in R. Squinting at a distance you might make the mistake of thinking:</p>
<blockquote>
<p>so what, it does this <strong>one little thing</strong></p>
</blockquote>
<p>But then when you’re actually up close, you realise this means that you don’t have to bend your brain around doing this thing, which can range from mildly annoying to mostly infuriating.</p>
<p>You save time and energy, and can focus more on <strong>doing what you want to do</strong>, and less on <strong>fighting against interruptions</strong>. This comic by <a href="http://heeris.id.au/2013/this-is-why-you-shouldnt-interrupt-a-programmer/" class="external-link">Jason Heeris</a> illustrates this point nicely, I think:</p>
<p>
</p>
<div style="height: auto">
<p><img src="https://raw.githubusercontent.com/tidyverse/reprex/main/img/ProgrammerInterrupted.png" alt="Why you shouldn't interrupt a programmer" style="max-height: 100%"></p>
</div>

<p>Once again thank you to Jenny Bryan for making our lives easier. Jenny will be joining the RStudio team this year and I am really looking forward to seeing what she gets up to.</p>
<p>Read more about reprex on github <a href="http://www.github.com/tidyverse/reprex#readme" class="external-link">here</a>.</p>
  </main>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, David Robinson, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

  </div></footer>
</body>
</html>
